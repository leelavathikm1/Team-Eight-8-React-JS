<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
  </head>
  <body>
    <form action="">
      <label for="fName">Enter Name </label>
      <input type="text" id="fName" /><br /><br />

      <label for="lName">Last Name</label>
      <input type="text" id="lName" /><br /><br />

      <label for="email">Enter E-MAil</label>
      <input type="email" id="eMail" /><br /><br />

      <button type="button" onclick="addUser()">Add User</button>
    </form>

    <hr />
    <table border="1">
      <thead>
        <tr>
          <th>First Name</th>
          <th>Last Name</th>
          <th>EMail</th>
          <th>Edit</th>
          <th>Delete</th>
        </tr>
      </thead>
      <tbody id="myTbody"></tbody>
    </table>
    <script>
      //Read the values from Form and create an object
      // Add the Object to an array
      // Clear Form
      // Display the Array of Object in table
      // Store the values in localStorage
      // Delete the User
      //   Validation
      // Edit User
      // Update User

      var allUsers = JSON.parse(localStorage.getItem("allUsers"));
      function addUser() {
        var user = {
          fName: document.getElementById("fName").value,
          lName: document.getElementById("lName").value,
          eMail: document.getElementById("eMail").value,
        };

        allUsers.push(user);
        // console.log(user);
        localStorage.setItem("allUsers", JSON.stringify(allUsers));
        displayUser(allUsers);
        clearForm();
      }

      function clearForm() {
        document.getElementById("fName").value = "";
        document.getElementById("lName").value = "";
        document.getElementById("eMail").value = "";
      }

      function displayUser(data) {
        document.getElementById("myTbody").innerHTML = "";
        data.forEach((user, i) => {
          var myTr = document.createElement("tr");
          for (a in user) {
            var myTd = document.createElement("td");
            myTd.innerHTML = user[a];
            myTr.appendChild(myTd);
          }

          var editTd = document.createElement("td");
          var editBtn = document.createElement("button");
          editBtn.innerHTML = "Edit";
          editTd.appendChild(editBtn);
          myTr.appendChild(editTd);

          var delTd = document.createElement("td");
          var delBtn = document.createElement("button");
          delBtn.setAttribute("onclick", deleteUser("+i+"));
          delBtn.innerHTML = "Delete";
          delTd.appendChild(delBtn);
          myTr.appendChild(delTd);

          document.getElementById("myTbody").appendChild(myTr);
        });
      }
    </script>
  </body>
</html>
